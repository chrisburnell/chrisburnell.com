<div class="meta">
    <time class="date  dt-published" datetime="{{ page.date | date_to_xmlschema }}">
        {% include content/emoji.liquid emoji='ğŸ—“' %}
        {% if page.mf_property contains 'bookmark-of' %}
            <span>bookmarked on</span>
        {% elsif page.mf_property contains 'like-of' %}
            <span>liked on</span>
        {% elsif page.mf_property contains 'listen-of' %}
            <span>listened on</span>
        {% elsif page.mf_property contains 'read-of' %}
            <span>started reading on</span>
        {% elsif page.mf_property contains 'watch-of' %}
            <span>watched on</span>
        {% elsif page.mf_property contains 'pk-drank' %}
            <span>drank on</span>
        {% elsif page.mf_property contains 'pk-ate' %}
            <span>ate on</span>
        {% elsif page.mf_root == 'recipe' %}
            <span>cooked on</span>
        {% elsif page.mf_root == 'review' %}
            <span>reviewed on</span>
        {% else %}
            <span>published on</span>
        {% endif %}
        <a class="u-uid  u-url" href="{{ canonical_local }}" title="Permalink: {{ canonical_local }}">
            {{ page.date | date_to_long_string }}
        </a>
    </time>
    {% if page.sitemap.lastmod %}
        <time class="date  dt-updated" datetime="{{ page.sitemap.lastmod | date_to_xmlschema }}">
            {% include content/emoji.liquid emoji='ğŸ—“' %}
            <span>updated on</span>
            <strong>{{ page.sitemap.lastmod | date_to_long_string }}</strong>
        </time>
    {% endif %}
    {% if page.release %}
        <time class="date  dt-released" datetime="{{ page.released | date_to_xmlschema }}">
            {% include content/emoji.liquid emoji='ğŸ—“' %}
            <span>released on</span>
            <strong>{{ page.release | date_to_long_string }}</strong>
        </time>
    {% endif %}
    {% if page.authors %}
        <div class="authors">
            {% if page.category == 'beer' %}
                {% include content/emoji.liquid emoji='ğŸº' %}
                <span>brewed by</span>
            {% elsif page.category == 'book' %}
                {% include content/emoji.liquid emoji='âœï¸' %}
                <span>written by</span>
            {% elsif page.category == 'movie' or page.category == 'tv' %}
                {% include content/emoji.liquid emoji='ğŸ¥' %}
                <span>produced by</span>
            {% elsif page.category == 'recipe' %}
                {% include content/emoji.liquid emoji='ğŸ“' %}
                <span>sourced from</span>
            {% else %}
                <span>by</span>
            {% endif %}
            {%- assign authors = page.authors | uniq -%}
            {%- for author in authors -%}
                {%- assign author_name = author.name | default: author | strip -%}
                {%- assign author_map = site.data.people | where_exp: 'target', 'author_name == target.name' | first | default: null -%}
                {%- assign author_link = author_map.link.last | default: author_map.link | default: author.link.last | default: author.link | default: null -%}
                {% unless forloop.first %}, {% endunless %}
                {%- if author_link -%}
                    <a class="h-cite" href="{{ author_link }}" title="{{ author_name }}" rel="external">{{ author_name }}</a>
                {%- else -%}
                    <strong class="h-cite">{{ author_name }}</strong>
                {%- endif -%}
            {%- endfor -%}
        </div>
    {% endif %}
    {% if page.audience %}
        <div class="audience">
            {% include content/emoji.liquid emoji='ğŸ“£' %}
            <span>target audience</span>
            {%- assign audiences = page.audience | uniq -%}
            {%- for audience in audiences -%}
                {%- assign audience_name = audience.name | default: audience | strip -%}
                {%- assign audience_map = site.data.people | where_exp: 'target', 'audience_name == target.name' | first | default: null -%}
                {%- assign audience_link = audience.link | default: audience_map.link | default: null -%}
                {% unless forloop.first %}, {% endunless %}
                {% if audience_link %}
                    <a class="h-card  u-audience" href="{{ audience_link }}" title="{{ audience_name }}" rel="external">{{ audience_name }}</a>
                {% else %}
                    <strong class="h-card  p-audience">{{ audience_name }}</strong>
                {% endif %}
            {%- endfor -%}
        </div>
    {% endif %}
    {% if in_reply_to_link %}
        <div class="in-reply-to">
            {% if page.rsvp %}
                {%- assign rsvp_going = page.rsvp.going | default: page.rsvp -%}
                <span>responded</span>
                <data class="p-rsvp  strong" value="{% if rsvp_going %}yes{% else %}no{% endif %}">{% if rsvp_going %}{% include content/emoji.liquid emoji='âœ…' %} Yes{% else %}{% include content/emoji.liquid emoji='âŒ' %} No{% endif %}</data>
                <span>to</span>
            {% else %}
                {% include content/emoji.liquid emoji='â†ªï¸' %}
                <span>in reply to</span>
            {% endif %}
            {%- assign mastodon_instance = null -%}
            {%- assign mastodon_username = null -%}
            {%- assign twitter_username = null -%}
            {%- assign reply_target = null -%}
            {%- assign page_map = site.posts | where_exp: 'post', 'in_reply_to_link contains post.slug' | first -%}
            {%- if page_map -%}
                {%- unless page_map.titlefree -%}
                    {%- assign reply_target = page_map.title -%}
                {%- endunless -%}
            {%- endif -%}
            {%- for person in site.data.people -%}
                {%- if person.mastodon -%}
                    {%- for person_mastodon in person.mastodon -%}
                        {%- assign mastodon_instance = person_mastodon | split: '@' | last -%}
                        {%- assign mastodon_username = person_mastodon | split: '@' | first -%}
                        {%- if in_reply_to_link contains mastodon_instance and in_reply_to_link contains mastodon_username -%}
                            {%- assign reply_target = person | map: 'name' | default: null -%}
                            {%- break -%}
                        {%- endif -%}
                    {%- endfor -%}
                {%- endif -%}
            {%- endfor -%}
            {%- unless reply_target -%}
                {%- assign mastodon_instance = site.data.mastodon_instances | where_exp: 'instance', 'in_reply_to_link contains instance' | first | default: null -%}
                {%- if mastodon_instance -%}
                    {%- if in_reply_to_link contains '/@' -%}
                        {%- assign mastodon_username = in_reply_to_link | split: '/@' | last | split: '/' | first | default: null -%}
                    {%- elsif in_reply_to_link contains '/users/' -%}
                        {%- assign mastodon_username = in_reply_to_link | split: '/users/' | last | split: '/' | first | default: null -%}
                    {%- endif -%}
                {%- elsif in_reply_to_link contains 'twitter.com' -%}
                    {%- assign twitter_username = in_reply_to_link | split: '/status/' | first | split: 'twitter.com/' | last | default: null -%}
                    {%- for person in site.data.people -%}
                        {%- for person_twitter in person.twitter -%}
                            {%- if person_twitter == twitter_username -%}
                                {%- assign reply_target = person | map: 'name' -%}
                                {%- break -%}
                            {%- endif -%}
                        {%- endfor -%}
                    {%- endfor -%}
                {%- else -%}
                    {%- assign stored_person_link = '' -%}
                    {%- for person in site.data.people -%}
                        {%- for person_link in person.link -%}
                            {%- if in_reply_to_link contains person_link and person_link.size > stored_person_link.size -%}
                                {%- assign stored_person_link = person_link -%}
                                {%- assign reply_target = person | map: 'name' -%}
                            {%- endif -%}
                        {%- endfor -%}
                    {%- endfor -%}
                {%- endif -%}
            {%- endunless -%}
            <a class="h-cite  u-in-reply-to" href="{{ in_reply_to_link }}"{% unless in_reply_to_link contains site.url %} rel="external"{% endunless %}>
                {% if in_reply_to_title != null and in_reply_to_title != in_reply_to_link %}
                    {{ in_reply_to_title }}
                    <em>by</em>
                {% endif %}
                {% if reply_target %}
                    {{ reply_target }}
                {% elsif mastodon_instance %}
                    {% if mastodon_username %}
                        @{{ mastodon_username }}@{{ mastodon_instance }}
                    {% else %}
                        a Toot
                    {% endif %}
                {% elsif in_reply_to_link contains 'twitter.com' %}
                    {% if twitter_username %}
                        @{{ twitter_username }}
                    {% else %}
                        a Tweet
                    {% endif %}
                {% else %}
                    {{ in_reply_to_link }}
                {% endif %}
            </a>
        </div>
    {% endif %}
    {% if page.rsvp.date %}
        {%- assign day = site.time | date: '%d' -%}
        {%- assign month = site.time | date: '%m' -%}
        {%- assign year = site.time | date: '%Y' -%}
        {%- assign check_day = page.rsvp.date | date: '%d' -%}
        {%- assign check_month = page.rsvp.date | date: '%m' -%}
        {%- assign check_year = page.rsvp.date | date: '%Y' -%}
        {%- assign finish_day = page.rsvp.finish | date: '%d' -%}
        {%- assign finish_month = page.rsvp.finish | date: '%m' -%}
        {%- assign finish_year = page.rsvp.finish | date: '%Y' -%}
        <time class="date" datetime="{{ page.rsvp.date | date_to_xmlschema }}{% if page.rsvp.finish %}-{{ page.rsvp.finish | date_to_xmlschema }}{% endif %}">
            {% include content/emoji.liquid emoji='ğŸ—“' %}
            {%- if check_year > year -%}
                <span>taking place on</span>
            {%- elsif check_year == year and check_month > month -%}
                <span>taking place on</span>
            {%- elsif check_year == year and check_month == month and check_day > day -%}
                <span>taking place on</span>
            {%- else -%}
                <span>took place on</span>
            {%- endif -%}
            <strong>
                {{ page.rsvp.date | date_to_long_string }}, {{ page.rsvp.date | date: '%R' }}
                {% if page.rsvp.finish %}
                    {%- assign date_timezone = page.rsvp.date | date: '%z' -%}
                    {%- assign finish_timezone = page.rsvp.finish | date: '%z' -%}
                    {% if date_timezone != finish_timezone %}
                        {{ date_timezone | replace: '+0000', 'GMT' | replace: '+0100', 'BST' }}
                    {% endif %}
                    â€“
                    {% if finish_year > check_year %}
                        {{ page.rsvp.finish | date_to_long_string }},
                    {% elsif finish_year == check_year and finish_month > check_month %}
                        {{ page.rsvp.finish | date_to_long_string }},
                    {% elsif finish_year == check_year and finish_month == check_month and finish_day > check_day %}
                        {{ page.rsvp.finish | date_to_long_string }},
                    {% endif %}
                    {{ page.rsvp.finish | date: '%R %z' | replace: '+0000', 'GMT' | replace: '+0100', 'BST' }}
                {% endif %}
            </strong>
        </time>
    {% endif %}
    {% if page.category == 'article' %}
        {% include content/emoji.liquid emoji='ğŸ“š' %}
        {%- assign words = site.emptyArray -%}
        {%- assign open_figure_splits = content | split: '<figure class="highlight">' -%}
        {%- assign words = words | push: open_figure_splits[0] -%}
        {%- assign open_figure_splits = open_figure_splits | shift -%}
        {%- for open_figure_split in open_figure_splits -%}
            {%- assign close_figure_split = open_figure_split | split: '</figure>' | last -%}
            {%- assign words = words | push: close_figure_split -%}
        {%- endfor -%}
        {%- assign words = words | join: ' ' | number_of_words -%}
        <div class="reading-length">
            <span>reading length</span>
            <strong>~{{ words | divided_by: 50 | round | times: 50 }} words</strong>
            {% if words < 250 %}
                <strong hidden aria-hidden="true">~1 min</strong>
            {% else %}
                <strong hidden aria-hidden="true">~{{ words | divided_by: 250 }} mins</strong>
            {% endif %}
        </div>
    {% endif %}
    {% if page.category == 'recipe' %}
        {% if page.prep_time %}
            <div class="prep-time">
                {% include content/emoji.liquid emoji='ğŸ•' %}
                <span>preparation time</span>
                <strong class="p-prep-time">{{ page.prep_time }}</strong>
            </div>
        {% endif %}
        {% if page.cooking_time %}
            <div class="cooking-time">
                {% include content/emoji.liquid emoji='â²' %}
                <span>cooking time</span>
                <strong class="p-cooking-time">{{ page.cooking_time }}</strong>
            </div>
        {% endif %}
        {% if page.serves %}
            <div class="serves">
                {% include content/emoji.liquid emoji='ğŸ›' %}
                <span>serves</span>
                <strong class="p-serves">{{ page.serves }}</strong>
            </div>
        {% endif %}
    {% endif %}
    {% if page.checkin %}
        {%- assign checkin = site.data.places | where: 'name', page.checkin.name | first | default: page.checkin -%}
        <div class="checkin">
            {% if page.category == 'beer' %}
                {% include content/emoji.liquid emoji='ğŸ»' %}
                <span>drank at</span>
            {% elsif page.category == 'talk' %}
                {% include content/emoji.liquid emoji='ğŸ—£' %}
                <span>given at</span>
            {% else %}
                {% include content/emoji.liquid emoji='ğŸ—º' %}
                <span>at</span>
            {% endif %}
            {% if checkin.link %}
                <a class="p-location" rel="external" href="{{ checkin.link }}">{{ checkin.name | default: checkin }}</a>
            {% elsif checkin.geo %}
                <a class="p-location" rel="external" href="http://www.openstreetmap.org/?mlat={{ location.geo | split: ',' | first }}&mlon={{ location.geo | split: ',' | last }}&zoom=12">{{ checkin.name }}</a>
            {% else %}
                <strong class="p-location">{{ checkin.name | default: checkin }}</strong>
            {% endif %}
        </div>
    {% endif %}
    {% if page.weather %}
        <div class="weather">
            {%- assign summary = page.weather.summary | downcase -%}
            {% if summary contains 'sun' and summary contains 'cloud' or summary contains 'rain' %}
                {% include content/emoji.liquid emoji='ğŸŒ¦' %}
            {% elsif summary contains 'rain' and summary contains 'thunder' or summary contains 'lightning' %}
                {% include content/emoji.liquid emoji='â›ˆ' %}
            {% elsif summary contains 'thunder' or summary contains 'lightning' %}
                {% include content/emoji.liquid emoji='ğŸŒ©' %}
            {% elsif summary contains 'snow' %}
                {% include content/emoji.liquid emoji='â„ï¸' %}
            {% elsif summary contains 'rain' %}
                {% include content/emoji.liquid emoji='ğŸŒ§' %}
            {% elsif summary contains 'fog' %}
                {% include content/emoji.liquid emoji='ğŸŒ«' %}
            {% elsif summary contains 'wind' %}
                {% include content/emoji.liquid emoji='ğŸ’¨' %}
            {% elsif summary contains 'cloud' %}
                {% include content/emoji.liquid emoji='ğŸŒ¥' %}
            {% elsif summary contains 'sun' %}
                {% include content/emoji.liquid emoji='ğŸŒ' %}
            {% elsif summary contains 'moon' and summary contains 'full' %}
                {% include content/emoji.liquid emoji='ğŸŒ' %}
            {% elsif summary contains 'moon' and summary contains 'new' %}
                {% include content/emoji.liquid emoji='ğŸŒš' %}
            {% elsif summary contains 'moon' and summary contains 'crescent' and summary contains 'waxing' %}
                {% include content/emoji.liquid emoji='ğŸŒ’' %}
            {% elsif summary contains 'moon' and summary contains 'crescent' and summary contains 'waning' %}
                {% include content/emoji.liquid emoji='ğŸŒ˜' %}
            {% elsif summary contains 'moon' and summary contains 'quarter' and summary contains 'first' %}
                {% include content/emoji.liquid emoji='ğŸŒ›' %}
            {% elsif summary contains 'moon' and summary contains 'quarter' and summary contains 'last' %}
                {% include content/emoji.liquid emoji='ğŸŒœ' %}
            {% elsif summary contains 'moon' and summary contains 'gibbous' and summary contains 'waxing' %}
                {% include content/emoji.liquid emoji='ğŸŒ”' %}
            {% elsif summary contains 'moon' and summary contains 'gibbous' and summary contains 'waning' %}
                {% include content/emoji.liquid emoji='ğŸŒ–' %}
            {% endif %}
            <span>weather</span>
            <strong class="p-weather">
                {% if page.weather.summary %}
                    {{ page.weather.summary }}
                {% endif %}
                {% if page.weather.temperature %}
                    {% if page.weather.summary %}and{% endif %}
                    {{ page.weather.temperature | split: '.' | first | replace: '-0', '0' | append: 'Â°C' }}
                {% endif %}
            </strong>
        </div>
    {% endif %}
    {% if page.rating %}
        <div>
            {% include content/emoji.liquid emoji='âœ¨' %}
            <span>I rate it</span>
            <data class="p-rating  rating  delta" value="{{ page.rating }}"></data>
            <data class="p-worst" aria-hidden="true" hidden>0</data>
            <data class="p-best" aria-hidden="true" hidden>5</data>
        </div>
    {% endif %}
    {% if page.badges %}
        <div class="badges">
            {% include content/emoji.liquid emoji='ğŸ†' %}
            <span>earning {{ page.badges.size }} badge{% if page.badges.size > 1 %}s{% endif %}</span>
            {% for badge in page.badges %}
                {%- if badge.name and badge.id -%}
                    {% unless forloop.first %}, {% endunless %}<a rel="external" href="{{ site.urls.untappd | append: 'badges/' | append: badge.id }}">{{ badge.name | replace: '(', '<small>(' | replace: ')', ')</small>' }}</a>
                {%- else -%}
                    {% unless forloop.first %}, {% endunless %}<strong>{{ badge.name | default: badge | replace: '(', '<small>(' | replace: ')', ')</small>' }}</strong>
                {%- endif -%}
            {% endfor %}
        </div>
    {% endif %}
    {% if page.tags.size > 0 %}
        {% assign tags_sorted = page.tags | sort %}
        <div class="tags">
            {% include content/emoji.liquid emoji='ğŸ·' %}
            <span>tagged under</span>
            {% for tag in tags_sorted %}{% unless forloop.first %}, {% endunless %}<a class="p-category" href="/tags/#{{ tag | slugify }}" rel="tag">{% include content/capitalizer.liquid input=tag %}</a>{% endfor %}
        </div>
    {% endif %}
    {% if page.category == 'pen' and page.codepen_featured == true %}
        <div class="featured">
            {% include content/emoji.liquid emoji='âœ¨ï¸' %}
            <span>featured on</span>
            <a rel="external" href="https://codepen.io/collection/hfqlg">the CodePen Homepage</a>
        </div>
    {% endif %}
    {% assign syndications = page.syndicate_to | default: page.syndicate-to | default: page.mf-syndicate-to | default: syndicate_to | default: nil %}
    {% if syndications or page.codepen_slug or page.speakerdeck_slug or page.vimeo_slug or page.youtube_slug %}
        <div class="syndication">
            {% include content/emoji.liquid emoji='â¤´ï¸' %}
            <span>also on </span>
            {%- assign syndication_count = 0 -%}
            {% for syndication in syndications %}
                {% if syndication contains 'codepen.io' %}
                    {%- assign syndication_slug = syndication | split: '/' | last -%}
                    {% capture syndication_codepen %}<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/pen/{{ syndication_slug }}">CodePen</a>
                                                     <small class="strong">
                                                         (<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/details/{{ syndication_slug }}">Details</a>,
                                                         <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/full/{{ syndication_slug }}">Full</a>)</small>{% endcapture %}
                {% elsif syndication contains 'gist.github.com' %}
                    {% capture syndication_gist %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">GitHub Gist</a>{% endcapture %}
                {% elsif syndication contains 'github.com' or syndication contains 'github.io' %}
                    {% capture syndication_github %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">GitHub</a>{% endcapture %}
                {% elsif syndication contains 'news.indieweb.org' %}
                    {% capture syndication_indienews %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">IndieNews</a>{% endcapture %}
                {% elsif syndication contains 'mastodon.social' %}
                    {% capture syndication_mastodon %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">Mastodon</a>
                                                     <small class="strong">
                                                         (<a rel="external" href="{{ site.urls.mastodon | split: '@' | first }}/interact/{{ syndication | split: '/' | last }}">Interact</a>)</small>{% endcapture %}
                {% elsif syndication contains 'twitter.com' %}
                    {% capture syndication_twitter %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">Twitter</a>
                                                     <small class="strong">
                                                         (<a rel="external" href="https://twitter.com/intent/like?tweet_id={{ syndication | split: '/' | last }}">Like</a>,
                                                         <a rel="external" href="https://twitter.com/intent/tweet?in_reply_to={{ syndication | split: '/' | last }}">Reply</a>,
                                                         <a rel="external" href="https://twitter.com/intent/retweet?tweet_id={{ syndication | split: '/' | last }}">Retweet</a>)</small>{% endcapture %}
                {% elsif syndication contains 'untappd.com' %}
                    {% capture syndication_untappd %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">Untappd</a>
                                                     <small class="strong">
                                                         (<a rel="external" href="{{ syndication }}#commentBox">Comment</a>)</small>{% endcapture %}
                {% endif %}
            {% endfor %}
            {%- if page.codepen_slug -%}
                <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/pen/{{ page.codepen_slug }}">CodePen</a>
                <small class="strong">
                    (<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/details/{{ page.codepen_slug }}">Details</a>,
                    <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/full/{{ page.codepen_slug }}">Full</a>)
                </small>
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_codepen -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_codepen }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_gist -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_gist }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_github -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_github }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_indienews -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_indienews }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_mastodon -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_mastodon }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if page.speakerdeck_slug -%}
                {% if syndication_count > 0 %}, {% endif %}
                <a class="u-syndication" rel="syndication" href="{{ page.speakerdeck_slug | prepend: '/' | prepend: site.urls.speakerdeck }}">Speaker Deck</a>
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_twitter -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_twitter }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if syndication_untappd -%}
                {% if syndication_count > 0 %}, {% endif %}
                {{ syndication_untappd }}
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if page.vimeo_slug -%}
                {% if syndication_count > 0 %}, {% endif %}
                <a class="u-syndication" rel="syndication" href="{{ page.vimeo_slug | prepend: 'https://vimeo.com/' }}">Vimeo</a>
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
            {%- if page.youtube_slug -%}
                {% if syndication_count > 0 %}, {% endif %}
                <a class="u-syndication" rel="syndication" href="{{ page.youtube_slug | prepend: 'https://www.youtube.com/watch?v=' }}">YouTube</a>
                {%- assign syndication_count = syndication_count | plus: 1 -%}
            {%- endif -%}
        </div>
    {% endif %}
    {% if page.posting_method %}
        {%- assign posting_method_by_link = site.data.posting_methods | where_exp: 'target', 'page.posting_method contains target.link' | first | map: 'name' | first | default: null -%}
        <div class="posting-method">
            {% include content/emoji.liquid emoji='âœï¸' %}
            <span>posted using</span>
            {% if page.posting_method contains 'http' %}
                <a href="{{ page.posting_method }}" rel="external">{{ posting_method_by_link | default: page.posting_method | replace: 'https://', '' | replace: 'http://', '' | replace: 'www.', '' }}</a>
            {% else %}
                <strong>{{ posting_method_by_link | default: page.posting_method }}</strong>
            {% endif %}
        </div>
    {% endif %}
    {% if page.prefix %}
        {%- assign posts_to_check = site.posts | where: 'category', page.category -%}
        {%- capture shorturl -%}
            {{ page.prefix }}
            {%- assign n = page.date | date: '%s' | divided_by: 86400 -%}
            {%- assign s = '' -%}
            {%- assign m = '0123456789ABCDEFGHJKLMNPQRSTUVWXYZ_abcdefghijkmnopqrstuvwxyz' | split: '' -%}
            {%- for i in (1..9999) -%}
                {%- assign d = n | modulo: 60 -%}
                {%- assign s = s | prepend: m[d] -%}
                {%- assign n = n | minus: d | divided_by: 60 -%}
                {%- if n <= 0 -%}
                    {%- break -%}
                {%- endif -%}
            {%- endfor -%}{{ s }}
        {%- endcapture -%}
        {%- assign page_date = page.date | date: '%Y-%m-%d' -%}
        {%- assign filtered_posts = site.emptyArray -%}
        {%- for check in posts_to_check reversed -%}
            {%- assign check_date = check.date | date: '%Y-%m-%d' -%}
            {%- if check_date == page_date -%}
                {%- assign filtered_posts = filtered_posts | push: check -%}
            {%- endif -%}
        {%- endfor -%}
        {%- for check in filtered_posts -%}
            {%- if check.title == page.title -%}
                {%- assign shorturl = shorturl | append: forloop.index -%}
                {%- break -%}
            {%- endif -%}
        {%- endfor -%}
        <div class="shorturl">
            {% include content/emoji.liquid emoji='ğŸ”—' %}
            <span>shorturl</span>
            <a rel="self" href="{{ site.shorturl | append: '/' | append: shorturl }}">{{ site.shorturl | remove: 'http://' | remove: 'https://' | append: '/' | append: shorturl }}</a>
        </div>
    {% endif %}
    {%- assign category_link = site.data.categories | where: 'category', page.category | first | map: 'type' -%}
    <data class="u-category" value="/{{ category_link }}" hidden>{{ page.category }}</data>
    <a href="https://fed.brid.gy" aria-hidden="true" hidden></a>
</div>
