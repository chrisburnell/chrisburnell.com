		{# Deferred JS -#}
		<script type="module" src="{% getBundleFileUrl 'js', 'module' %}" defer></script>
		<script src="{% getBundleFileUrl 'js' %}" defer></script>

{# JS Module Includes -#}
{%- if (js_module_includes | toArray) | length %}
		{%- for js_module_include in (js_module_includes | toArray) %}
		{%- js js_module_include -%}{% renderFile js_module_include %}{%- endjs %}
		<script src="{% getBundleFileUrl 'js', js_module_include %}" type="module" defer></script>
		{%- endfor -%}
{%- endif %}

{# JS Includes -#}
{%- if (js_includes | toArray) | length %}
		{%- for js_include in (js_includes | toArray) %}
		{%- js js_include -%}{% renderFile js_include %}{%- endjs %}
		<script src="{% getBundleFileUrl 'js', js_include %}" defer></script>
		{%- endfor -%}
{%- endif %}

{# Render out Deferred JS -#}
{%- js 'module' -%}{% renderFile 'src/js/defer.js' %}{%- endjs -%}
{%- js -%}{% renderFile 'src/js/imports/settings.js' %}{%- endjs -%}
{%- js -%}{% renderFile 'src/js/imports/masonry-polyfill.js' %}{%- endjs -%}

{# Fathom Analytics -#}
{%- if eleventy.env.runMode === 'build' and not excludeFromAnalytics -%}
<script defer>
(function () {
	if (
		navigator.doNotTrack === "1" ||
		typeof localStorage === "undefined" ||
		localStorage.getItem("analytics") === "false"
	) {
		return;
	}
	window.fathom =
		window.fathom ||
		function () {
			(window.fathom.q = window.fathom.q || []).push(arguments);
		};
	const scriptElement = document.createElement("script");
	scriptElement.id = "fathom-script";
	scriptElement.src = "{{ site.urls.fathom }}/tracker.js";
	scriptElement.defer = true;
	document.head.appendChild(scriptElement);
	fathom("set", "siteId", "{{ site.fathom_siteid }}");
	fathom("trackPageview");
})();
</script>
{%- endif -%}
