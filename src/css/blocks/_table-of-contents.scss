////
/// Table of Contents
/// extends .meta
/// @group blocks
////

.toc {
	padding-block: var(--size-gap);

	@media print {
		display: none;
	}

	@apply --inline-above(var(--size-breakpoint-large), main) {
		block-size: 100%;
	}

	& is-land {
		@apply --inline-above(var(--size-breakpoint-large), main) {
			position: sticky;
			inset-block-start: calc(var(--size-header, 0px) + 1rem);
		}
	}
}

.table-of-contents {
	& nav {
		max-block-size: 40vb;
		max-block-size: 40dvb;
		box-shadow: var(--box-shadow, var(--box-shadow-medium));
		overflow-x: hidden;
		overflow-y: auto;
		overscroll-behavior: contain;
		scrollbar-gutter: stable;
		@apply --animation(toc-shadow-inside);
		animation-timeline: scroll(self block);

		@apply --inline-above(var(--size-breakpoint-medium), main) {
			max-block-size: calc(100vb - (1em * var(--line-height-default)) - var(--size-small) - var(--size-header, 0px) - (2 * var(--size-medium)));
			max-block-size: calc(100dvb - (1em * var(--line-height-default)) - var(--size-small) - var(--size-header, 0px) - (2 * var(--size-medium)));
		}
	}
}

@keyframes toc-shadow-inside {
	from {
		box-shadow:
			var(--box-shadow, var(--box-shadow-medium)),
			inset 0 -1em 1.5em 0 --transparent(var(--color-shadow), 40%);
	}
	to {
		box-shadow:
			var(--box-shadow, var(--box-shadow-medium)),
			inset 0 1em 1.5em 0 --transparent(var(--color-shadow), 40%);
	}
}
