////
/// Table of Contents
/// extends .meta
/// @group blocks
////

.table-of-contents {
	@media print {
		display: none;
	}

	@include cq("main", "medium") {
		position: sticky;
		inset-block-start: calc(var(--size-header) + 1rem);
	}

	details {
		overflow: visible;
	}

	summary {
		font-size: var(--font-size-gamma);
	}

	nav {
		max-block-size: 40vh;
		max-block-size: 40dvb;
		box-shadow: var(--box-shadow, var(--box-shadow-medium));
		overflow-x: hidden;
		overflow-y: auto;
		overscroll-behavior: contain;
		scrollbar-gutter: stable;
		animation: toc-shadow-inside linear;
		animation-timeline: scroll(self block);

		@include cq("main", "small") {
			max-block-size: 60vh;
			max-block-size: 60dvb;
		}

		@include cq("main", "medium") {
			max-block-size: calc(100vh - (var(--size-header) * 2));
			max-block-size: calc(100dvb - (var(--size-header) * 2));
		}
	}
}

@keyframes toc-shadow-inside {
	from {
		box-shadow:
			var(--box-shadow, var(--box-shadow-medium)),
			inset 0 -1em 1.5em 0 oklab(var(--shadow-color) / 0.4);
	}
	to {
		box-shadow:
			var(--box-shadow, var(--box-shadow-medium)),
			inset 0 1em 1.5em 0 oklab(var(--shadow-color) / 0.4);
	}
}
