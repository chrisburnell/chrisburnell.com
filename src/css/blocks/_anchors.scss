////
/// Anchor
/// @group blocks
////

@use "../abstracts/mixins-scss" as *;

h2 :is(a:not(.button), .anchor):not(:hover, :focus, :active) {
	text-decoration: none;
}

// Skip to main content
.skip-link {
	--outline-color: var(--color-bowhead);

	background-color: var(--color-bowhead);
	color: var(--color-snowy);
	display: block;
	padding: 1em 1.5em;
	position: absolute;
	inset-block-start: var(--size-medium);
	inset-inline-start: 50%;
	transform: translateX(-50%);
	font-weight: var(--font-weight-semibold);
	text-align: center;
	z-index: var(--z-index-notification);
}

// Give footnote and fragment anchors a distinct appearance
:is([id^="fnref"], [href^="#fnref"]),
sup > a:first-child:last-child,
.fragment-anchor:is(:hover, :focus, :active) {
	background-color: var(--body-color);
    color: oklch(from var(--body-background-color) l 0 0) !important;
}
:is([id^="fnref"], [href^="#fnref"]),
sup > a:first-child:last-child,
.fragment-anchor {
    padding-inline: 0.5ch;
	outline: var(--size-border-thin) solid transparent;
    border-radius: var(--size-border-default);
    text-decoration: none;

	&:is(:hover, :focus, :active) {
		outline-color: var(--color-maple);
	}
}

// Fragment Anchors (permalinks inside headings)
.fragment-anchor {
	color: inherit;
	position: absolute;
	inset-block-start: 50%;
	inset-inline-end: 0;
	transform: translateY(calc(-50% - 0.2cap));
	font-family: var(--font-family-monospace);
	font-weight: var(--font-weight-semibold);

	:is(h1, h2, h3, h4, h5, h6):not(:hover, :focus-within) > &:not(:hover, :focus, :active) {
		@include visually-hidden;
	}

	&:is(:hover, :focus, :active) {
		outline-color: var(--color-maple);
	}
}

// Related Anchors
.related-anchor::after {
	// NO-BREAK SPACE, RIGHTWARDS ARROW
	content: " â†’";
}

// Anchors around Icons
.icon-anchor {
	inline-size: var(--size-tap);
	block-size: var(--size-tap);
	display: inline-grid;
	place-items: center;
}

// Fancy gradient anchor text
.colourful-anchor {
	&:is(:hover, :focus, :active) {
		@media not print {
			background-color: transparent;
			background-image: linear-gradient(to bottom, var(--color-raven), var(--color-maple));
			background-clip: text;
			-webkit-text-fill-color: transparent;
			box-decoration-break: clone;
		}
	}
}

// Bookmarklets
[href^="javascript:"]::after {
	content: "Drag me to your bookmarks toolbar!";
}
